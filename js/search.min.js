(function(){function e(e,t){return t.lastIndex=0,t.test(e)}function t(t){var i=this.value.trim();if(i){var a=new RegExp(i.replace(/[ ]/g,"|"),"gmi");(function(e){if(n)e(n);else{var t=new XMLHttpRequest;t.open("GET",p,!0),t.onload=function(){if(this.status>=200&&this.status<300){var t=JSON.parse(this.response);n=t instanceof Array?t:t.posts,e(n)}else console.error(this.statusText)},t.onerror=function(){console.error(this.statusText)},t.send()}})(function(t){var n,i,r=t.filter(function(t){return s=a,e((n=t).title,s)||n.tags.some(function(t){return e(t.name,s)})||e(n.text,s);var n,s});i=(n=r).length?n.map(function(e){return t=f,n={title:e.title,path:(s.BLOG.ROOT+"/"+e.path).replace(/\/{2,}/g,"/"),date:new Date(e.date).toLocaleDateString(),tags:e.tags.map(function(e){return"<span>#"+e.name+"</span>"}).join("")},t.replace(/\{\w+\}/g,function(e){var t=e.replace(/\{|\}/g,"");return n[t]||""});var t,n}).join(""):'<li class="tips"><i class="icon icon-coffee icon-3x"></i><p>Results not found!</p></li>',d.innerHTML=i,v.show()}),t.preventDefault()}}var n,s=window||this,i=s.BLOG.even,a=s.BLOG.$,r=a("#search"),o=a("#search-wrap"),c=a("#key"),l=a("#back"),u=a("#search-panel"),d=a("#search-result"),f=a("#search-tpl").innerHTML,p=(s.BLOG.ROOT+"/content.json").replace(/\/{2}/g,"/"),h=(s.BLOG.noop,a("html")),v={show:function(){s.innerWidth<760&&h.classList.add("lock-size"),u.classList.add("in")},hide:function(){s.innerWidth<760&&h.classList.remove("lock-size"),u.classList.remove("in")}};r.addEventListener(i,function(){o.classList.toggle("in"),c.value="",o.classList.contains("in")?c.focus():c.blur()}),l.addEventListener(i,function(){o.classList.remove("in"),v.hide()}),document.addEventListener(i,function(e){"key"!==e.target.id&&"click"===i&&v.hide()}),c.addEventListener("input",t),c.addEventListener(i,t)}).call(this);