$(document).ready(function(){var e=CONFIG.algolia;if(e.applicationID&&e.apiKey&&e.indexName){var a=instantsearch({appId:e.applicationID,apiKey:e.apiKey,indexName:e.indexName,searchFunction:function(e){$("#algolia-search-input").find("input").val()&&e.search()}});[instantsearch.widgets.searchBox({container:"#algolia-search-input",placeholder:e.labels.input_placeholder}),instantsearch.widgets.hits({container:"#algolia-hits",hitsPerPage:e.hits.per_page||10,templates:{item:function(e){return'<a href="'+CONFIG.root+e.path+'" class="algolia-hit-item-link">'+e._highlightResult.title.value+"</a>"},empty:function(a){return'<div id="algolia-hits-empty">'+e.labels.hits_empty.replace(/\$\{query}/,a.query)+"</div>"}},cssClasses:{item:"algolia-hit-item"}}),instantsearch.widgets.stats({container:"#algolia-stats",templates:{body:function(a){return e.labels.hits_stats.replace(/\$\{hits}/,a.nbHits).replace(/\$\{time}/,a.processingTimeMS)+'<span class="algolia-powered">  <img src="'+CONFIG.root+'images/algolia_logo.svg" alt="Algolia" /></span><hr />'}}}),instantsearch.widgets.pagination({container:"#algolia-pagination",scrollTo:!1,showFirstLast:!1,labels:{first:'<i class="fa fa-angle-double-left"></i>',last:'<i class="fa fa-angle-double-right"></i>',previous:'<i class="fa fa-angle-left"></i>',next:'<i class="fa fa-angle-right"></i>'},cssClasses:{root:"pagination",item:"pagination-item",link:"page-number",active:"current",disabled:"disabled-item"}})].forEach(a.addWidget,a),a.start(),$(".popup-trigger").on("click",function(e){e.stopPropagation(),$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle(),$("#algolia-search-input").find("input").focus()}),$(".popup-btn-close").click(function(){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")})}else window.console.error("Algolia Settings are invalid.")}),$(document).ready(function(){if(0!==$("#local-search-input").size()){var e=!1,a="search.xml";0==a.length&&(a="search.xml");var t="/"+a;$(".popup-trigger").mousedown(function(a){a.stopPropagation(),0==e?function(a,t,s){"use strict";$.ajax({url:a,dataType:"xml",async:!0,success:function(a){e=!0,$(".popup").detach().appendTo(".header-inner");var n=$("entry",a).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get(),l=document.getElementById(t),o=document.getElementById(s);l.addEventListener("input",function(){var e=0,a='<ul class="search-result-list">',t=this.value.trim().toLowerCase().split(/[\s\-]+/);o.innerHTML="",this.value.trim().length>1&&n.forEach(function(i){var s=!0,n=i.title.trim().toLowerCase(),l=i.content.trim().replace(/<[^>]+>/g,"").toLowerCase(),o=i.url,r=-1,c=-1,p=-1;if(""!=n&&""!=l&&t.forEach(function(e,a){r=n.indexOf(e),c=l.indexOf(e),r<0&&c<0?s=!1:(c<0&&(c=0),0==a&&(p=c))}),s){e+=1,a+="<li><a href='"+o+"' class='search-result-title'>"+n+"</a>";var u=i.content.trim().replace(/<[^>]+>/g,"");if(p>=0){var d=p-20,g=p+80;d<0&&(d=0),0==d&&(g=50),g>u.length&&(g=u.length);var h=u.substring(d,g);t.forEach(function(e){var a=new RegExp(e,"gi");h=h.replace(a,'<b class="search-keyword">'+e+"</b>")}),a+='<p class="search-result">'+h+"...</p>"}a+="</li>"}}),a+="</ul>",0==e&&(a='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'),""==t&&(a='<div id="no-result"><i class="fa fa-search fa-5x" /></div>'),o.innerHTML=a}),i()}})}(t,"local-search-input","local-search-result"):i()}),$(".popup-btn-close").click(function(e){$(".popup").hide(),$(".popoverlay").remove(),$("body").css("overflow","")}),$(".popup").click(function(e){e.stopPropagation()})}function i(){$("body").append('<div class="popoverlay">').css("overflow","hidden"),$(".popup").toggle()}});