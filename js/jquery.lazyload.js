!function(e,n){"function"==typeof define&&define.amd?define(["jquery"],n):n(e.jQuery)}(this,function(e){e.fn.lazyload=function(n){return this.each(function(){n=n||{};var t=e.extend({},{},n),i=e(this),a=n.srcSign||"lazy-src",o=n.errCallBack||function(){},r=n.container||e(window);if(t.cache=[],"IMG"==this.tagName){var c={obj:i,tag:"img",url:i.attr(a)};t.cache.push(c)}else{var g=i.find("img");g.each(function(n){var i=this.nodeName.toLowerCase(),o=e(this).attr(a),r={obj:g.eq(n),tag:i,url:o};t.cache.push(r)})}var f=function(){var i,c=r.height();i=e(window).get(0)===window?e(window).scrollTop():r.offset().top,e.each(t.cache,function(e,t){var r,g=t.obj,f=t.tag,s=t.url;g&&(r=g.offset().top-i,g.height(),r>=0&&r<c&&(s&&"img"===f&&function(e,t,i){if(!e.attr("src"))if(1==n.cache){console.log(e);var a,o=document.getElementById("canvas1").getContext("2d");image=new Image,image.src=e.attr(t),image.onload=function(){o.drawImage(image,0,0),a=o.getImageData(0,0,500,250),console.log(a)}}else{((c=e).width(),c.height(),c.offset().top,c.offset().left,c.clone().addClass("lazy-loding").insertBefore(c))[0].src="/img/img-loading.png",c.hide();var r=e.attr(t);e[0].onerror=function(n){var t,a;a=i,(t=e)[0].src&&(t[0].src.indexOf("img-err.png")>0||t[0].src.indexOf("img-err2.png")>0)||(t.width(),t.height(),t[0].src="/img/img-err.png",a())},e[0].onload=function(n){e.parent().find(".lazy-loding").remove(),e.show()},e[0].src=r}var c}(g,a,o),t.obj=null))})};f(),r.bind("scroll",f),r.bind("resize",f)})}});